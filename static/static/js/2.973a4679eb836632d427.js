j([2],{"1kS7":function(e,t){t.f=Object.getOwnPropertySymbols},Dd8w:function(e,t,n){"use strict";t.__esModule=!0;var a,s=n("woOf"),i=(a=s)&&a.__esModule?a:{default:a};t.default=i.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}},NpIQ:function(e,t){t.f={}.propertyIsEnumerable},PpuE:function(e,t){},R4wc:function(e,t,n){var a=n("kM2E");a(a.S+a.F,"Object",{assign:n("To3L")})},To3L:function(e,t,n){"use strict";var a=n("lktj"),s=n("1kS7"),i=n("NpIQ"),r=n("sB3e"),c=n("MU5D"),l=Object.assign;e.exports=!l||n("S82l")(function(){var e={},t={},n=Symbol(),a="abcdefghijklmnopqrst";return e[n]=7,a.split("").forEach(function(e){t[e]=e}),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=a})?function(e,t){for(var n=r(e),l=arguments.length,o=1,u=s.f,d=i.f;l>o;)for(var f,v=c(arguments[o++]),p=u?a(v).concat(u(v)):a(v),h=p.length,m=0;h>m;)d.call(v,f=p[m++])&&(n[f]=v[f]);return n}:l},V3tA:function(e,t,n){n("R4wc"),e.exports=n("FeBl").Object.assign},f2Us:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Xxa5"),s=n.n(a),i=n("exGp"),r=n.n(i),c=n("Dd8w"),l=n.n(c),o={data:function(){return{item:{remote_url:[],alias:[],director:[],starring:[]},state:{isRefreshIng:!1},playerOptions:{},selectPlayIndex:0}},components:{Scroller:n("8Dyd").a},created:function(){this.fetch()},computed:{playlist:function(){var e=this;return this.item.remote_url.map(function(t){return l()({withCredentials:!1},t,e.getMediaType(t.url))})}},methods:{getMediaType:function(e){return e.endsWith(".mp4")?{type:"video/mp4",ext:"mp4",inline:!0}:e.endsWith(".m3u8")?{type:"application/x-mpegURL",ext:"m3u8",inline:!0}:{type:"application/x-shockwave-flash",ext:"flash",inline:!1}},fetch:function(){var e=this;return r()(s.a.mark(function t(){var n,a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$route.params.id,t.next=3,e.$http.get("/video/"+n);case 3:a=t.sent,e.item=a.payload,e.setPlaylist();case 6:case"end":return t.stop()}},t,e)}))()},setPlaylist:function(){var e=this.playlist[this.selectPlayIndex];if(e&&e.inline){var t=this.$refs.videoPlayer.$el.getBoundingClientRect(),n=t.width,a=t.height;this.playerOptions={language:"zh-CN",playbackRates:[.7,1,1.5,2],sources:e.url,width:n,height:a,poster:this.item.thumbnail,playsinline:!0}}else window.open(e.url)},handelPlayerReadied:function(e){var t=this;return r()(s.a.mark(function n(){var a;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$localforage.record.getItem(t.item._id||"");case 3:if(a=n.sent){n.next=6;break}return n.abrupt("return");case 6:e.currentTime(a.current),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0);case 12:case"end":return n.stop()}},n,t,[[0,9]])}))()},setPlaylistIndex:function(e){this.selectPlayIndex=e,this.setPlaylist()},handelPlay:function(){console.log("handelPlay")},handelTimeUpdate:function(e){this.saveRecord(e.currentTime(),e.duration())},saveRecord:function(e,t){var n=this;return r()(s.a.mark(function a(){var i;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i={name:n.item.name,current:e,total:t,at:Date.now()},a.next=3,n.$localforage.record.setItem(n.item._id,i);case 3:case"end":return a.stop()}},a,n)}))()},refresh:function(e){var t=this;return r()(s.a.mark(function n(){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.state.isRefreshIng){n.next=2;break}return n.abrupt("return");case 2:return t.state.isRefreshIng=!0,n.next=5,t.fetch();case 5:t.state.isRefreshIng=!1,e("done");case 7:case"end":return n.stop()}},n,t)}))()}}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"column"},[n("header",{staticClass:"header row"},[n("div",{staticClass:"left",on:{click:function(t){e.$router.back()}}},[n("i",{staticClass:"iconfont icon-fanhui"}),e._v("返回")]),e._v(" "),n("div",{staticClass:"center"},[e._v(e._s(e.item.name))]),e._v(" "),n("div",{staticClass:"right"})]),e._v(" "),n("main",{staticClass:"col-h"},[n("scroller",{attrs:{state:e.state,"class-name":""},on:{refresh:e.refresh}},[n("video-player",{ref:"videoPlayer",staticClass:"video-player-box",attrs:{options:e.playerOptions},on:{play:e.handelPlay,ready:e.handelPlayerReadied,timeupdate:e.handelTimeUpdate}}),e._v(" "),n("div",{staticClass:"block"},[e._v("选择片源：")]),e._v(" "),n("div",{staticClass:"block row paly-item-wrap"},e._l(e.playlist,function(t,a){return n("div",{key:t.url,staticClass:"paly-item",class:e.selectPlayIndex===a&&"actived",on:{click:function(t){e.setPlaylistIndex(a)}}},[e._v("\n        "+e._s(t.tag)+". "+e._s(t.ext)+"\n\n      ")])})),e._v(" "),n("div",{staticClass:"block"},[e._v("片名：《"+e._s(e.item.name)+"》")]),e._v(" "),n("div",{staticClass:"block"},[e._v("质量："+e._s(e.item.quality))]),e._v(" "),n("div",{staticClass:"block"},[e._v("别名："+e._s(e.item.alias.join(" , ")))]),e._v(" "),n("div",{staticClass:"block"},[e._v("导演："+e._s(e.item.director.join(" , ")))]),e._v(" "),n("div",{staticClass:"block"},[e._v("主演："+e._s(e.item.starring.join(" , ")))]),e._v(" "),n("div",{staticClass:"block"},[e._v("来源："+e._s(e.item.source))]),e._v(" "),n("div",{staticClass:"block"},[e._v(e._s(e.item.language)+" / "+e._s(e.item.region)+" / "+e._s(e.item.released_at)+" / "+e._s(e.item.running_time)+" 分钟")]),e._v(" "),n("div",{staticClass:"block"},[e._v("简介："+e._s(e.item.introduce))])],1)],1)])},staticRenderFns:[]};var d=n("VU/8")(o,u,!1,function(e){n("PpuE")},null,null);t.default=d.exports},woOf:function(e,t,n){e.exports={default:n("V3tA"),__esModule:!0}}});