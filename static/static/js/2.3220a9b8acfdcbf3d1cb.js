j([2],{"1kS7":function(t,e){e.f=Object.getOwnPropertySymbols},"8Ktm":function(t,e){},Dd8w:function(t,e,a){"use strict";e.__esModule=!0;var n,i=a("woOf"),s=(n=i)&&n.__esModule?n:{default:n};e.default=s.default||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t}},NpIQ:function(t,e){e.f={}.propertyIsEnumerable},R4wc:function(t,e,a){var n=a("kM2E");n(n.S+n.F,"Object",{assign:a("To3L")})},To3L:function(t,e,a){"use strict";var n=a("lktj"),i=a("1kS7"),s=a("NpIQ"),r=a("sB3e"),c=a("MU5D"),l=Object.assign;t.exports=!l||a("S82l")(function(){var t={},e={},a=Symbol(),n="abcdefghijklmnopqrst";return t[a]=7,n.split("").forEach(function(t){e[t]=t}),7!=l({},t)[a]||Object.keys(l({},e)).join("")!=n})?function(t,e){for(var a=r(t),l=arguments.length,o=1,u=i.f,d=s.f;l>o;)for(var v,f=c(arguments[o++]),p=u?n(f).concat(u(f)):n(f),m=p.length,h=0;m>h;)d.call(f,v=p[h++])&&(a[v]=f[v]);return a}:l},V3tA:function(t,e,a){a("R4wc"),t.exports=a("FeBl").Object.assign},f2Us:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Xxa5"),i=a.n(n),s=a("exGp"),r=a.n(s),c=a("Dd8w"),l=a.n(c),o={data:function(){return{item:{remote_url:[],alias:[],director:[],starring:[]},playerOptions:{},selectPlayIndex:0}},created:function(){this.fetch()},computed:{playlist:function(){var t=this;return this.item.remote_url.map(function(e){return l()({src:e,withCredentials:!1},t.getMediaType(e))})}},methods:{getMediaType:function(t){return t.endsWith(".mp4")?{type:"video/mp4",name:"mp4",inline:!0}:t.endsWith(".m3u8")?{type:"application/x-mpegURL",name:"m3u8",inline:!0}:{type:"application/x-shockwave-flash",name:"flash",inline:!1}},fetch:function(){var t=this;return r()(i.a.mark(function e(){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.$route.params.id,e.next=3,t.$http.get("/video/"+a);case 3:n=e.sent,t.item=n.payload,t.setPlaylist();case 6:case"end":return e.stop()}},e,t)}))()},setPlaylist:function(){var t=this.playlist[this.selectPlayIndex];if(t&&t.inline){var e=this.$refs.videoPlayer.$el.getBoundingClientRect(),a=e.width,n=e.height;this.playerOptions={language:"zh-CN",playbackRates:[.7,1,1.5,2],sources:t.src,width:a,height:n,poster:this.item.thumbnail,playsinline:!0}}else window.open(t.src)},handelPlayerReadied:function(t){var e=this;return r()(i.a.mark(function a(){var n;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.$localforage.record.getItem(e.item._id||"");case 3:if(n=a.sent){a.next=6;break}return a.abrupt("return");case 6:t.currentTime(n.current),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}},a,e,[[0,9]])}))()},setPlaylistIndex:function(t){this.selectPlayIndex=t,this.setPlaylist()},handelPlay:function(){console.log("handelPlay")},handelTimeUpdate:function(t){this.saveRecord(t.currentTime(),t.duration())},saveRecord:function(t,e){var a=this;return r()(i.a.mark(function n(){var s;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s={name:a.item.name,current:t,total:e,at:Date.now()},n.next=3,a.$localforage.record.setItem(a.item._id,s);case 3:case"end":return n.stop()}},n,a)}))()}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"column scroll"},[a("header",{staticClass:"header row"},[a("div",{staticClass:"left",on:{click:function(e){t.$router.back()}}},[a("i",{staticClass:"iconfont icon-fanhui"}),t._v("返回")]),t._v(" "),a("div",{staticClass:"center"},[t._v("影片详情")]),t._v(" "),a("div",{staticClass:"right"})]),t._v(" "),a("main",{staticClass:"col-h"},[a("video-player",{ref:"videoPlayer",staticClass:"video-player-box",attrs:{options:t.playerOptions},on:{play:t.handelPlay,ready:t.handelPlayerReadied,timeupdate:t.handelTimeUpdate}}),t._v(" "),a("div",{staticClass:"block"},[t._v("选择片源：")]),t._v(" "),a("div",{staticClass:"block row paly-item-wrap"},t._l(t.playlist,function(e,n){return a("div",{key:e.src,staticClass:"paly-item",class:t.selectPlayIndex===n&&"actived",on:{click:function(e){t.setPlaylistIndex(n)}}},[t._v("\n        "+t._s(e.name)+"\n\n      ")])})),t._v(" "),a("div",{staticClass:"block"},[t._v("片名：《"+t._s(t.item.name)+"》")]),t._v(" "),a("div",{staticClass:"block"},[t._v("质量："+t._s(t.item.quality))]),t._v(" "),a("div",{staticClass:"block"},[t._v("别名："+t._s(t.item.alias.join(" , ")))]),t._v(" "),a("div",{staticClass:"block"},[t._v("导演："+t._s(t.item.director.join(" , ")))]),t._v(" "),a("div",{staticClass:"block"},[t._v("主演："+t._s(t.item.starring.join(" , ")))]),t._v(" "),a("div",{staticClass:"block"},[t._v("来源："+t._s(t.item.source))]),t._v(" "),a("div",{staticClass:"block"},[t._v(t._s(t.item.language)+" / "+t._s(t.item.region)+" / "+t._s(t.item.released_at)+" / "+t._s(t.item.running_time)+" 分钟")]),t._v(" "),a("div",{staticClass:"block"},[t._v("简介："+t._s(t.item.introduce))])],1)])},staticRenderFns:[]};var d=a("VU/8")(o,u,!1,function(t){a("8Ktm")},null,null);e.default=d.exports},woOf:function(t,e,a){t.exports={default:a("V3tA"),__esModule:!0}}});