j([2],{"1kS7":function(e,t){t.f=Object.getOwnPropertySymbols},DLSs:function(e,t){},Dd8w:function(e,t,a){"use strict";t.__esModule=!0;var n,s=a("woOf"),r=(n=s)&&n.__esModule?n:{default:n};t.default=r.default||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}},NpIQ:function(e,t){t.f={}.propertyIsEnumerable},R4wc:function(e,t,a){var n=a("kM2E");n(n.S+n.F,"Object",{assign:a("To3L")})},To3L:function(e,t,a){"use strict";var n=a("lktj"),s=a("1kS7"),r=a("NpIQ"),i=a("sB3e"),c=a("MU5D"),l=Object.assign;e.exports=!l||a("S82l")(function(){var e={},t={},a=Symbol(),n="abcdefghijklmnopqrst";return e[a]=7,n.split("").forEach(function(e){t[e]=e}),7!=l({},e)[a]||Object.keys(l({},t)).join("")!=n})?function(e,t){for(var a=i(e),l=arguments.length,o=1,u=s.f,d=r.f;l>o;)for(var f,v=c(arguments[o++]),p=u?n(v).concat(u(v)):n(v),h=p.length,m=0;h>m;)d.call(v,f=p[m++])&&(a[f]=v[f]);return a}:l},V3tA:function(e,t,a){a("R4wc"),e.exports=a("FeBl").Object.assign},f2Us:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Xxa5"),s=a.n(n),r=a("exGp"),i=a.n(r),c=a("Dd8w"),l=a.n(c),o={data:function(){return{item:{remote_url:[],alias:[],director:[],starring:[]},state:{isRefreshIng:!1},playerOptions:{},selectPlayIndex:0}},components:{Scroller:a("8Dyd").a},created:function(){this.fetch()},computed:{playlist:function(){var e=this;return this.item.remote_url.map(function(t){return l()({withCredentials:!1},t,e.getMediaType(t.url))})}},methods:{getMediaType:function(e){return e.endsWith(".mp4")?{type:"video/mp4",ext:"mp4",inline:!0}:e.endsWith(".m3u8")?{type:"application/x-mpegURL",ext:"m3u8",inline:!0}:{type:"application/x-shockwave-flash",ext:"flash",inline:!1}},fetch:function(){var e=this;return i()(s.a.mark(function t(){var a,n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$route.params.id,t.next=3,e.$http.get("/video/"+a);case 3:n=t.sent,e.item=n.payload,e.setPlaylist();case 6:case"end":return t.stop()}},t,e)}))()},setPlaylist:function(){var e=this.playlist[this.selectPlayIndex];e&&e.inline?(this.$refs.videoPlayer.src=e.url,this.$refs.videoPlayer.poster=this.item.thumbnail):window.open(e.url)},handelPlayerReadied:function(e){var t=this,a=e.target;return i()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handelPlayerReadied"),e.prev=1,e.next=4,t.$localforage.record.getItem(t.item._id||"");case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return");case 7:a.currentTime=n.current,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}},e,t,[[1,10]])}))()},setPlaylistIndex:function(e){this.selectPlayIndex=e,this.setPlaylist()},handelPlay:function(){console.log("handelPlay")},handelTimeUpdate:function(e){var t=e.target;console.log("handelTimeUpdate"),this.saveRecord(t.currentTime,t.duration)},saveRecord:function(e,t){var a=this;return i()(s.a.mark(function n(){var r;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r={name:a.item.name,current:e,total:t,at:Date.now()},n.next=3,a.$localforage.record.setItem(a.item._id,r);case 3:case"end":return n.stop()}},n,a)}))()},refresh:function(e){var t=this;return i()(s.a.mark(function a(){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!t.state.isRefreshIng){a.next=2;break}return a.abrupt("return");case 2:return t.state.isRefreshIng=!0,a.next=5,t.fetch();case 5:t.state.isRefreshIng=!1,e("done");case 7:case"end":return a.stop()}},a,t)}))()}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"column"},[a("header",{staticClass:"header row"},[a("div",{staticClass:"left",on:{click:function(t){e.$router.back()}}},[a("i",{staticClass:"iconfont icon-fanhui"}),e._v("返回")]),e._v(" "),a("div",{staticClass:"center"},[e._v(e._s(e.item.name))]),e._v(" "),a("div",{staticClass:"right"})]),e._v(" "),a("main",{staticClass:"col-h"},[a("scroller",{attrs:{state:e.state,"class-name":""},on:{refresh:e.refresh}},[a("video",{ref:"videoPlayer",staticClass:"video-player-box",attrs:{src:"",controls:"",autoplay:"",playsinline:"","webkie-playsinline":""},on:{play:e.handelPlay,ready:e.handelPlayerReadied,timeupdate:e.handelTimeUpdate}}),e._v(" "),a("div",{staticClass:"block"},[e._v("选择片源：")]),e._v(" "),a("div",{staticClass:"block row paly-item-wrap"},e._l(e.playlist,function(t,n){return a("div",{key:t.url,staticClass:"paly-item",class:e.selectPlayIndex===n&&"actived",on:{click:function(t){e.setPlaylistIndex(n)}}},[e._v("\n        "+e._s(t.tag)+". "+e._s(t.ext)+"\n\n      ")])})),e._v(" "),a("div",{staticClass:"block"},[e._v("片名：《"+e._s(e.item.name)+"》")]),e._v(" "),a("div",{staticClass:"block"},[e._v("质量："+e._s(e.item.quality))]),e._v(" "),a("div",{staticClass:"block"},[e._v("别名："+e._s(e.item.alias.join(" , ")))]),e._v(" "),a("div",{staticClass:"block"},[e._v("导演："+e._s(e.item.director.join(" , ")))]),e._v(" "),a("div",{staticClass:"block"},[e._v("主演："+e._s(e.item.starring.join(" , ")))]),e._v(" "),a("div",{staticClass:"block"},[e._v("来源："+e._s(e.item.source))]),e._v(" "),a("div",{staticClass:"block"},[e._v(e._s(e.item.language)+" / "+e._s(e.item.region)+" / "+e._s(e.item.released_at)+" / "+e._s(e.item.running_time)+" 分钟")]),e._v(" "),a("div",{staticClass:"block"},[e._v("简介："+e._s(e.item.introduce))])])],1)])},staticRenderFns:[]};var d=a("VU/8")(o,u,!1,function(e){a("DLSs")},null,null);t.default=d.exports},woOf:function(e,t,a){e.exports={default:a("V3tA"),__esModule:!0}}});