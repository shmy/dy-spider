j([4],{"3H0F":function(e,t){},dwST:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Xxa5"),n=r.n(a),s=r("exGp"),o=r.n(s),i={name:"keep-search",data:function(){return{paging:{keyword:"",page:1,per_page:21},items:[],state:{isRefreshIng:!1,isLoadMoreIng:!1,noMore:!1}}},components:{Scroller:r("8Dyd").a},activated:function(){this.$refs.searchInput.focus()},methods:{fetch:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return o()(n.a.mark(function r(){var a;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$http.get("/video/search",e.paging);case 2:a=r.sent,t?e.items=a.payload.result:e.items.push.apply(e.items,a.payload.result),t||a.payload.result.length?e.state.noMore=!1:e.state.noMore=!0;case 5:case"end":return r.stop()}},r,e)}))()},refresh:function(e){var t=this;return o()(n.a.mark(function r(){return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!t.state.isRefreshIng){r.next=2;break}return r.abrupt("return");case 2:return t.state.isRefreshIng=!0,t.paging.page=1,r.next=6,t.fetch(1);case 6:t.state.isRefreshIng=!1,e("done");case 8:case"end":return r.stop()}},r,t)}))()},loadmore:function(){var e=this;return o()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.state.isLoadMoreIng&&!e.state.noMore){t.next=2;break}return t.abrupt("return");case 2:return e.state.isLoadMoreIng=!0,e.paging.page++,t.next=6,e.fetch();case 6:e.state.isLoadMoreIng=!1;case 7:case"end":return t.stop()}},t,e)}))()},handelInput:function(){var e=this;return o()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.paging.page=1,t.next=3,e.fetch(1);case 3:case"end":return t.stop()}},t,e)}))()}}},c={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"column"},[r("header",{staticClass:"header row"},[r("div",{staticClass:"left",on:{click:function(t){e.$router.back()}}},[r("i",{staticClass:"iconfont icon-fanhui"}),e._v("返回")]),e._v(" "),r("div",{staticClass:"center row justify-center items-center"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.paging.keyword,expression:"paging.keyword"}],ref:"searchInput",staticClass:"search-bar",attrs:{type:"search",placeholder:"输入电影名称以搜索"},domProps:{value:e.paging.keyword},on:{change:e.handelInput,input:function(t){t.target.composing||e.$set(e.paging,"keyword",t.target.value)}}})])]),e._v(" "),r("main",{staticClass:"col-h"},[r("scroller",{attrs:{state:e.state,"enable-loadmore":!0,"class-name":"movie-page row"},on:{refresh:e.refresh,loadmore:e.loadmore}},e._l(e.items,function(e){return r("movie-item",{key:e._id,attrs:{item:e}})}))],1)])},staticRenderFns:[]};var u=r("VU/8")(i,c,!1,function(e){r("3H0F")},"data-v-b909b61a",null);t.default=u.exports}});